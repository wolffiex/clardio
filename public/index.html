<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Clardio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* iPad optimizations */
    html, body {
      height: 100%;
      height: 100dvh;
      overscroll-behavior: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Tabular numbers for metrics */
    .tabular-nums {
      font-variant-numeric: tabular-nums;
    }

    /* Safe area insets */
    .safe-area {
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
      padding-bottom: env(safe-area-inset-bottom);
    }
  </style>
</head>
<body class="bg-gray-950 text-white h-full overflow-hidden touch-manipulation">
  <!-- Metrics bar at TOP -->
  <div id="metrics-section" class="absolute top-0 left-0 right-0 bg-gray-800/90 px-6 py-3 flex justify-between items-center safe-area">
    <div class="flex gap-8">
      <div class="text-center">
        <div class="text-2xl font-bold text-cyan-400 tabular-nums">
          <span id="metric-power">---</span><span class="text-sm">W</span>
        </div>
        <div class="text-xs text-gray-400">Power</div>
      </div>
      <div class="text-center">
        <div class="text-2xl font-bold text-red-400 tabular-nums">
          <span id="metric-hr">---</span>
        </div>
        <div class="text-xs text-gray-400">HR</div>
      </div>
      <div class="text-center">
        <div class="text-2xl font-bold text-green-400 tabular-nums">
          <span id="metric-cadence">---</span>
        </div>
        <div class="text-xs text-gray-400">Cadence</div>
      </div>
      <div class="text-center">
        <div class="text-2xl font-bold text-white tabular-nums">
          <span id="metric-time">00:00</span>
        </div>
        <div class="text-xs text-gray-400">Time</div>
      </div>
    </div>
    <!-- Target: Top-Right (in metrics bar) -->
    <div id="target-overlay" class="hidden text-right">
      <div class="text-sm text-gray-400">Target</div>
      <div class="text-xl font-bold text-amber-400">
        <span id="target-power">---</span> for <span id="target-remaining" class="tabular-nums">--:--</span>
      </div>
    </div>
  </div>

  <!-- Coach message area: Above center -->
  <div id="coach-section" class="absolute left-0 right-0 top-[40%] -translate-y-1/2 flex flex-col items-center">
    <p id="coach-message" class="text-2xl md:text-3xl font-light text-center leading-tight max-w-4xl px-4 text-gray-200">
      Connecting...
    </p>

    <!-- Action button (hidden by default) -->
    <button
      id="action-button"
      class="hidden mt-6 px-8 py-4 text-xl font-semibold bg-blue-600 hover:bg-blue-500 active:bg-blue-700 rounded-xl transition-colors min-w-[180px] min-h-[56px]"
    >
      <!-- Button text set via SSE -->
    </button>
  </div>

  <!-- YouTube PiP Zone: Bottom-Right (reserved, stays clear) -->
  <!-- This ~300x170px area is reserved for YouTube Picture-in-Picture -->
  <div class="absolute bottom-4 right-4 w-[300px] h-[170px] pointer-events-none">
    <!-- PiP window will float here -->
  </div>

  <!-- Connection status indicator -->
  <div id="connection-status" class="absolute bottom-4 left-4 flex items-center gap-2">
    <div id="connection-dot" class="w-3 h-3 rounded-full bg-yellow-500"></div>
    <span id="connection-text" class="text-sm text-gray-500">connecting</span>
  </div>

  <script type="module" src="/js/client.js"></script>
</body>
</html>
