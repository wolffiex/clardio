<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Clardio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* iPad optimizations */
    html, body {
      height: 100%;
      height: 100dvh;
      overscroll-behavior: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Tabular numbers for metrics */
    .tabular-nums {
      font-variant-numeric: tabular-nums;
    }

    /* Safe area insets */
    .safe-area {
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
      padding-bottom: env(safe-area-inset-bottom);
    }
  </style>
</head>
<body class="bg-gray-950 text-white h-full overflow-hidden touch-manipulation">
  <!-- Main container -->
  <div id="app" class="h-full flex flex-col justify-between p-6 safe-area">

    <!-- Coach message area -->
    <div id="coach-section" class="flex-1 flex flex-col items-center justify-center">
      <p id="coach-message" class="text-4xl md:text-5xl font-light text-center leading-tight max-w-4xl px-4">
        Connecting...
      </p>

      <!-- Action button (hidden by default) -->
      <button
        id="action-button"
        class="hidden mt-8 px-12 py-5 text-2xl font-semibold bg-blue-600 hover:bg-blue-500 active:bg-blue-700 rounded-2xl transition-colors min-w-[200px] min-h-[60px]"
      >
        <!-- Button text set via SSE -->
      </button>
    </div>

    <!-- Target overlay (top right, hidden by default) -->
    <div id="target-overlay" class="hidden absolute top-6 right-6 bg-amber-500/20 border-2 border-amber-500 rounded-xl px-5 py-3">
      <div class="text-amber-400">
        <span id="target-power" class="text-xl font-bold">---</span>
        <span class="text-lg">W</span>
        <span class="text-gray-400 mx-2">|</span>
        <span id="target-remaining" class="text-xl font-bold tabular-nums">--:--</span>
      </div>
    </div>

    <!-- Metrics bar at bottom -->
    <div id="metrics-section" class="flex justify-around items-end text-center pb-2">
      <div class="metric flex-1">
        <span id="metric-power" class="text-5xl md:text-6xl font-bold tabular-nums">---</span>
        <span class="text-lg text-gray-400 block">W</span>
      </div>
      <div class="metric flex-1">
        <span id="metric-hr" class="text-5xl md:text-6xl font-bold tabular-nums text-red-400">---</span>
        <span class="text-lg text-gray-400 block">bpm</span>
      </div>
      <div class="metric flex-1">
        <span id="metric-cadence" class="text-5xl md:text-6xl font-bold tabular-nums text-blue-400">---</span>
        <span class="text-lg text-gray-400 block">rpm</span>
      </div>
      <div class="metric flex-1">
        <span id="metric-time" class="text-5xl md:text-6xl font-bold tabular-nums text-gray-300">00:00</span>
        <span class="text-lg text-gray-400 block">time</span>
      </div>
    </div>
  </div>

  <!-- Connection status indicator -->
  <div id="connection-status" class="absolute top-4 left-4 flex items-center gap-2">
    <div id="connection-dot" class="w-3 h-3 rounded-full bg-yellow-500"></div>
    <span id="connection-text" class="text-sm text-gray-500">connecting</span>
  </div>

  <script type="module" src="/js/client.js"></script>
</body>
</html>
